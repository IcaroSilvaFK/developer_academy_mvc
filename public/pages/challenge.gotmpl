<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/assets/styles/pages/challenge.css">
  {{ template "templates/head.tmpl" }}
  <title>Document</title>
</head>

<body x-data="{comments}">
 
  {{template "templates/header.tmpl" }}
  <main class="container__main">
    <div>

    <header>
      <div class="header__presentation">
        <span>Desafio</span>
        <span x-text="dayjs(new Date('{{ .created }}')).fromNow()"></span>
      </div>
      <div class="header__title">
        <h2>{{ .challenge.Title }}</h2>
        <p>
          {{ .challenge.Description }}
        </p>
      </div>
    </header>
    <section class="container__video" >
      
    </section>

    <section class="container__comments">
      <h3>110 Comentários</h3>
     
      <ul>
        <template x-for="comment in comments">
            <li class="container__comment">
              <img src="https://avatars.githubusercontent.com/u/86238635?v=4" alt="Icaro's avatar" />
              <div>
                <header>
                  <b x-text="'@'+comment.user"></b>
                  <span x-text="comment.createdAt"></span>
                </header>
                <p x-text="comment.comment"></p>
              </div>
              </li>
        </template>
      </ul>

      <form>
        <textarea
          placeholder="Escreva seu comentário"
        ></textarea>
        <button>
          <span>Comentar</span>
          <i class="ph ph-chat-teardrop"></i>
        </button>
      </form>
    </section>
    </div>
    <section class="container__help">
      <header>
        <i class="ph ph-lightbulb"></i>
      <h3>Dicas sobre o tema</h3>
      </header>
      <ol>
        
      </ol>
    </section>
  </main>

  <script>
    const comments = Array.from({length: 10}).map((_, idx) => ({
      user: `Alice ${idx+1}`,
      comment: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Et natus impedit nemo possimus? Dolorem voluptates labore a beatae reprehenderit adipisci, ut maiores deleniti voluptatem quam odio, quasi aut mollitia voluptas?",
      createdAt: dayjs(new Date()).fromNow()
    }))

    document.querySelector(".container__video").innerHTML = `{{ .challenge.EmbedUrl }}`

    function sanitizeData(text) {
      const arr = text.split("\n")
      const container = document.querySelector("ol")
      const result = []

      for(const item of arr) {
       const $li =  document.createElement("li")
      
       $li.textContent = item

       container.appendChild($li)
      }
    }
    sanitizeData('{{.challenge.Hint.Text}}')
  </script>
</body>

</html>
